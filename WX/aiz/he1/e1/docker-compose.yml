services:
  hexstrike:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: hexstrike-ai
    ports:
      - "${HEXSTRIKE_PORT:-8888}:8888"
    environment:
      HEXSTRIKE_PORT: "${HEXSTRIKE_PORT:-8888}"
      HEXSTRIKE_HOST: "0.0.0.0"
      DEBUG_MODE: "${DEBUG_MODE:-0}"
      CHROME_BIN: "/usr/bin/google-chrome"
      CHROMEDRIVER: "/usr/local/bin/chromedriver"
      DISPLAY: ":99"
    volumes:
      - hexstrike_data:/app/data
      - hexstrike_outputs:/app/outputs
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped
    privileged: true
    cap_add:
      - NET_ADMIN
      - SYS_ADMIN
      - SYS_PTRACE
    network_mode: host

volumes:
  hexstrike_data:
  hexstrike_outputs: