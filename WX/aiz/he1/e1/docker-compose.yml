services:
  hexstrike:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: hexstrike-ai
    ports:
      - "${HEXSTRIKE_PORT:-8888}:8888"
    environment:
      HEXSTRIKE_PORT: "${HEXSTRIKE_PORT:-8888}"
      HEXSTRIKE_HOST: "0.0.0.0"
      DEBUG_MODE: "${DEBUG_MODE:-0}"
      CHROME_BIN: "/usr/bin/chromium"
      CHROMEDRIVER: "/usr/bin/chromedriver"
    restart: unless-stopped
    # command: ["python3", "hexstrike_server.py", "--port", "8888"]

# Usage:
#   docker compose up --build -d
#   open http://localhost:8888/health
# Override port:
#   HEXSTRIKE_PORT=9999 docker compose up --build -d
